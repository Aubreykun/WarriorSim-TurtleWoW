importScripts("./data/levelstats.min.js","./data/gear_turtle.min.js","./data/enchants_turtle.min.js","./classes/player.min.js","./classes/simulation.min.js","./classes/weapon.min.js","./globals.min.js"),onmessage=(s=>{const t=s.data;t.globals.turtle?(importScripts("./data/talents_turtle.min.js"),importScripts("./data/spells_turtle.min.js"),importScripts("./data/buffs_turtle.min.js"),importScripts("./classes/spell_turtle.min.js")):(importScripts("./data/talents.min.js"),importScripts("./data/spells.min.js"),importScripts("./data/buffs.min.js"),importScripts("./classes/spell.min.js")),updateGlobals(t.globals);const a=new Player(...t.player),e=new Simulation(a,s=>{t.fullReport&&(s.player=a.serializeStats(),s.spread=e.spread),postMessage([TYPE.FINISHED,s])},(s,t)=>{postMessage([TYPE.UPDATE,s,t])},t.sim);e.startSync()});